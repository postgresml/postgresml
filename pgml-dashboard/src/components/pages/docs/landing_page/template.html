<%
  use crate::components::pages::docs::landing_page::AltDocCard;

  fn section_title(title: &str, paragraph: &str) -> String {
    format!(r#"
      <div class="d-flex flex-column gap-3 align-items-center pb-5">
        {}
        {}
      </div>"#, 
      title,
      if paragraph.len() > 0 {format!(r#"<p class="text-center w-75">{}</p>"#, paragraph)} else {"".to_string()}
    )
  }

  fn section_links(items: Vec<DocCard>) -> String {
    format!(r#"
      <div class="row gy-4">
        {}
      </div>"#, 
      items.into_iter().map(|item| format!(r#"<div class="col-xl-4 col-md-6 col-12">{}</div>"#, item.render_once().unwrap())).collect::<Vec<String>>().join("")
    )
  }

%>

<div class="w-100" data-controller="pages-docs-landing-page">
  <div class="docs-content-max-width-container container d-flex flex-column gap-5">
    <div class="py-4">
      <%+ feature_banner %>
    </div>
    <div class="w-100 d-flex flex-column align-items-center">
      <h1 class="text-center">PostgresML</br><span class="text-gradient-green">Documentation</span></h1>
      <p class="w-75 text-center">PostgresML is a open-source database extension that turns Postgres into an end-to-end machine learning platform. Build, train, and deploy ML/AI models directly within your Postgres database without moving data between systems.</p>
    </div>

    <div class="row gy-4">
      <div class="col-xl-4 col-12">
        <%+ AltDocCard::new().icon("new_releases").title("Create your dtabase").href("/docs/introduction/getting-started/create-your-database") %>
      </div>
      <div class="col-xl-4 col-12">
        <%+ AltDocCard::new().icon("compare_arrows").title("Connect your app").href("/docs/introduction/getting-started/connect-your-app") %>
      </div>
      <div class="col-xl-4 col-12">
        <%+ AltDocCard::new().icon("analytics").title("Import your data").href("/docs/introduction/getting-started/import-your-data/") %>
      </div>
    </div>

    <div class="mt-5">
      <%- section_title(
        "<h2>SQL Extensions</h2>", 
        "SQL extensions provide end-to-end ML & AI functionality from inference to deployment. They can be used in any combination to implement bespoke models across use cases.") %>
      
      <div class="d-flex flex-column gap-4_5">
        <div class="d-flex flex-column">
          <p class="eyebrow-text">AI</p>
          <%- section_links(sql_extensions_ai)%>
        </div>

        <div class="d-flex flex-column">
          <p class="eyebrow-text">ML</p>
          <%- section_links(sql_extensions_ml)%>
        </div>
      </div>
    </div>

    
    <div class="mt-5">
      <div class="d-flex flex-column gap-3 align-items-center">
        <%- section_title(
          r#"<div class="d-flex gap-2">
            <h2>Client SDKs</h2>
            <div class="language-logos p-2 d-flex gap-2 h-100 rounded-2">
              <img  width="28px" height="28px" src="/dashboard/static/images/logos/javascript.png"/>
              <img  width="28px" height="28px" src="/dashboard/static/images/logos/python.png"/>
            </div>
          </div>"#, 
          "Client SDKs implement the best practices to streamline development of common ML/AI use cases in JavaScript or Python.")%>
      </div>
      <div class="d-flex flex-column gap-4_5">
        <div class="d-flex flex-column">
          <p class="eyebrow-text">OVERVIEW</p>
          <%- section_links(client_sdks_overview)%>
        </div>
        <div class="d-flex flex-column">
          <p class="eyebrow-text">TUTORIALS</p>
          <%- section_links(client_sdks_tutorials)%>
        </div>
      </div>
    </div>

    <div class="mt-5">
      <%- section_title("<h2>Benchmarks</h2>", "")%>
      <%- section_links(benchmarks)%>
    </div>
  </div>
</div>